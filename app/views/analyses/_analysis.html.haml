- begin
  - r = a.query.present? ? ActiveRecord::Base.connection().execute(a.query) : []
  - if r.length == 0
    Empty result
  - else
    - if a.view.present?
      = Haml::Engine.new(a.view).render(Object.new,:a => a, :r => r)
    - else
      %table.table.table-condensed.table-striped
        - keys = r[0].keys.select { |k| k.is_a? String }
        %thead
          %tr
            - keys.each do |k|
              %th= k
        %tbody
          - r.each do |row|
            %tr
            - keys.each do |k|
              %td= row[k]
- rescue Exception => e
  %h4 An exception occured during execution:
  %pre= e.message
  %pre= e.backtrace.inspect
